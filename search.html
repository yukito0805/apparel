<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>栄養素検索</title>
<link rel="stylesheet" href="search.css">
</head>

<body>

<div class="container">

<header>
  <h1>Nutrition Search</h1>
  <p class="subtitle">栄養素から食材を探す</p>
</header>

<div class="search-box">
  <input type="text" id="keyword" placeholder="例：ビタミンC / DHA / 食物繊維">
  <button onclick="search()">検索</button>
</div>

<div id="results" class="result-grid"></div>

</div>

<script>

const GAS_URL = "https://script.google.com/macros/s/AKfycbyiSpXTf9JK2asp6chdMQwpx2xPJhbmQINkl0Is5wOOiQl8zCtxxIXODQp410hEhPir/exec";

let allData = [];

async function loadData(){
  const res = await fetch(GAS_URL);
  allData = await res.json();
}

loadData();

function search(){

  const keyword = document.getElementById("keyword").value.trim();
  const container = document.getElementById("results");
  container.innerHTML = "";

  if(!keyword){
    container.innerHTML = "<div class='empty'>検索ワードを入力してください</div>";
    return;
  }

  const filtered = allData.filter(item =>
    item.栄養素 && item.栄養素.includes(keyword)
  );

  if(filtered.length === 0){
    container.innerHTML = "<div class='empty'>該当なし</div>";
    return;
  }

  filtered.forEach(item => {

    const card = document.createElement("div");
    card.className = "card";

    card.innerHTML = `
      <div class="food">${item.食材名}</div>
      <div class="category">${item.分類}</div>
      <div class="nutrient">${item.栄養素}</div>
      <div class="note">${item.備考}</div>
    `;

    container.appendChild(card);
  });
}

loadData();

</script>

</body>
</html>